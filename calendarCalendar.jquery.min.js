/*! calendarCalendar:0.5.0 2016-04-13 */
!function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend(!0,{},i,c),this._defaults=i,this._name=h,this.init()}var f=new Date,g=new Date,h="calendarCalendar",i={containerName:"calendarCalendar",lexicon:{titleDays:["Su","Mo","Tu","We","Th","Fr","Sa"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],startCalendarTitle:"Arrive On",endCalendarTitle:"Depart On",singleCalendarTitle:""},startDateId:"calendar-start-date",endDateId:"calendar-end-date",startDate:f,endDate:new Date(g.setDate(f.getDate()+1)),minDate:null,maxDate:null,onDateChange:function(){},calculatePosition:function(a){return this.calculatePosition(a)},onOpen:function(){},onClose:function(){},showPaddingDates:!1,calendarMode:"range",showBackground:!0,showCloseButton:!1,closeButtonContent:"x",closeOnDateSelect:!1,initializeDateChange:!0};e.prototype={init:function(){this.open=!1,this.container=a("#"+this.options.containerName),0==this.container.length&&(this.container=a("<div>",{id:this.options.containerName,"class":"calendarCalendar"}),a("body").append(this.container),this.container=a("#"+this.options.containerName)),this.container.hide(),a(this.element).unbind("click",a.proxy(this.drawCalendars,this)).bind("click",a.proxy(this.drawCalendars,this)),this.options.calendarMode="single"==this.options.calendarMode||"range"==this.options.calendarMode?this.options.calendarMode:"range",this.options.startDateId==this.options.endDateId&&(this.options.endDateId+="2"),this.options.maxDate<this.options.minDate&&(this.options.maxDate=null,this.options.maxDate=null),this.dateUpdate(this.options.initializeDateChange),null!=this.options.startDate&&this.options.startDate.setHours(0,0,0,0),null!=this.options.endDate&&this.options.endDate.setHours(0,0,0,0),null!=this.options.minDate&&this.options.minDate.setHours(0,0,0,0),null!=this.options.maxDate&&this.options.maxDate.setHours(0,0,0,0),a(b).unbind("resize",a.proxy(this.resize,this)).bind("resize",a.proxy(this.resize,this))},closeCalendar:function(){return this.open=!1,this.container.hide(),this.container.html(""),"range"==this.options.calendarMode?this.options.onClose(this.options.startDate,this.options.endDate,this.options.lexicon,this.element):this.options.onClose(this.options.startDate,this.options.lexicon,this.element),"closed"},resize:function(){return this.open&&this.drawCalendars(),"resized"},drawCalendars:function(){this.open||("range"==this.options.calendarMode?this.options.onOpen(this.options.startDate,this.options.endDate,this.options.lexicon,this.element):this.options.onOpen(this.options.startDate,this.options.lexicon,this.element)),this.open=!0,this.container.show();var b="";this.options.showBackground&&(b=a("<div>",{"class":"background"}),b.bind("click",a.proxy(this.closeCalendar,this)));var c="";if(this.options.showCloseButton&&(c=a("<div>",{"class":"close-button"}).html(this.options.closeButtonContent),c.bind("click",a.proxy(this.closeCalendar,this))),"range"==this.options.calendarMode)var d=this.generateCalendar(this.options.startDate,this.options.startDateId,this.options.lexicon.startCalendarTitle),e=this.generateCalendar(this.options.endDate,this.options.endDateId,this.options.lexicon.endCalendarTitle);else var d=this.generateCalendar(this.options.startDate,this.options.startDateId,this.options.lexicon.singleCalendarTitle),e="";var f=a("<div>",{"class":"calendars "+this.options.calendarMode}).html(d).append(e).append(c);this.container.html(b).append(f);try{f.css(a.proxy(this.options.calculatePosition,this,a(this.element))())}catch(g){console.log("custom calculatePosition returned dud positioning - using the default positioning"),f.css(a.proxy(this.calculatePosition,this,a(this.element))())}},calculatePosition:function(a){var b=a.offset(),c={top:b.top+a.outerHeight(),left:b.left+a.outerWidth()};return c},generateCalendar:function(b,c,d){var e="calendar";this.options.maxDate instanceof Date&&+b.getMonth()==+this.options.maxDate.getMonth()&&+b.getFullYear()==+this.options.maxDate.getFullYear()&&(e+=" max-month"),this.options.minDate instanceof Date&&+b.getMonth()==+this.options.minDate.getMonth()&&+b.getFullYear()==+this.options.minDate.getFullYear()&&(e+=" min-month");var f=a("<div>",{id:c,"class":e}),g=a("<div>",{"class":"calendar-header"}),h=a("<div>",{"class":"calendar-arrow left"}),i=a("<div>",{"class":"calendar-title"}),j=a("<div>",{"class":"calendar-caption"}).html(d),k=a("<div>",{"class":"calendar-date"}).html(this.options.lexicon.longMonths[b.getMonth()]+" "+b.getFullYear()),l=a("<div>",{"class":"calendar-arrow right"}),m=a("<div>",{"class":"caldendar-main"}),n=a("<div>",{"class":"calendar-days calendar-table"}),o=a("<div>",{"class":"calendar-dates calendar-table"});h.bind("click",{date:b,month:b.getMonth()-1},a.proxy(this.monthClickEvent,this)),l.bind("click",{date:b,month:b.getMonth()+1},a.proxy(this.monthClickEvent,this)),g.append(h),i.append(j),i.append(k),g.append(i),g.append(l),f.append(g);for(var p=0;7>p;p++)n.append(a("<div>",{"class":"calendar-cell"}).html(this.options.lexicon.titleDays[p]));for(var q=new Date(b.getFullYear(),b.getMonth()+1,0).getDate(),r=new Date(b.getFullYear(),b.getMonth(),1).getDay(),p=r;p>0;p--){var s;if(this.options.showPaddingDates){var t=new Date(b.getFullYear(),b.getMonth(),1);t.setDate(t.getDate()-p),s=t.getDate()}else s="&nbsp;";o.append(a("<div>",{"class":"calendar-cell disabled padding"}).html(s))}var u=new Date;u.setHours(0,0,0,0);for(var p=1;q>=p;p++){var v=new Date(b.valueOf());v.setDate(p),v.setHours(0,0,0,0);var w="calendar-cell";w+=c==this.options.endDateId&&v<=this.options.startDate||v<this.options.minDate&&this.options.minDate instanceof Date||v>this.options.maxDate&&this.options.maxDate instanceof Date||c==this.options.startDateId&&+v==+this.options.maxDate&&"range"==this.options.calendarMode?" disabled":" active",p==b.getDate()&&(w+=" selected"),v.getTime()==u.getTime()&&(w+=" today");var x=a("<div>",{"class":w}).html(p);-1==w.indexOf("disabled")&&x.bind("click",{date:b,day:p,id:c},a.proxy(this.dayClickEvent,this)),o.append(x)}for(var p=1;42-(r+q)>=p;p++){var s;if(this.options.showPaddingDates){var t=new Date(b.getFullYear(),b.getMonth(),q);t.setDate(t.getDate()+p),s=t.getDate()}else s="&nbsp;";o.append(a("<div>",{"class":"calendar-cell disabled padding"}).html(s))}return m.append(n),m.append(o),f.append(m),f},dayClickEvent:function(a){a.data.date.setDate(a.data.day),this.dateUpdate(),this.options.closeOnDateSelect?"range"==this.options.calendarMode&&a.data.id!=this.options.endDateId?this.drawCalendars():this.closeCalendar():this.drawCalendars()},monthClickEvent:function(a){a.data.date.setMonth(a.data.month),this.dateUpdate(),this.drawCalendars()},dateUpdate:function(a){a="undefined"==typeof a?!0:a,this.options.minDate instanceof Date&&+this.options.minDate>+this.options.startDate&&(this.options.startDate=new Date(this.options.minDate.valueOf())),this.options.maxDate instanceof Date&&+this.options.maxDate<=+this.options.startDate&&(this.options.startDate=new Date(this.options.maxDate.valueOf()),"range"==this.options.calendarMode&&this.options.startDate.setDate(this.options.startDate.getDate()-1)),this.options.maxDate instanceof Date&&+this.options.maxDate<+this.options.endDate&&(this.options.endDate=new Date(this.options.maxDate.valueOf())),+this.options.endDate<=+this.options.startDate&&(this.options.endDate=new Date(this.options.startDate.valueOf()),this.options.endDate.setDate(this.options.endDate.getDate()+1)),a&&("range"==this.options.calendarMode?this.options.onDateChange(this.options.startDate,this.options.endDate,this.options.lexicon):this.options.onDateChange(this.options.startDate,this.options.lexicon))}},a.fn[h]=function(b){return this.each(function(){if(a.data(this,"plugin_"+h)){var c=a.data(this,"plugin_"+h);c.options=a.extend(!0,{},c.options,b),c.init()}else{var c=new e(this,b);a.data(this,"plugin_"+h,c)}})}}(jQuery,window,document);