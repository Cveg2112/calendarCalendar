(function(e,t,n,r){function a(t,n){this.element=t;this.options=e.extend({},u,n);this._defaults=u;this._name=o;this.init()}var i=new Date,s=new Date,o="calendarCalendar",u={containerName:"calendarCalendar",titleDays:["Su","Mo","Tu","We","Th","Fr","Sa"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],startCalendarTitle:"Arrive On",endCalendarTitle:"Depart On",startDateId:"calendar-start-date",endDateId:"calendar-end-date",startDate:i,endDate:new Date(s.setDate(i.getDate()+1)),minDate:null,maxDate:null,onDateChange:function(e,t,n,r,i,s){},calculatePosition:function(e,t){return t.calculatePosition(e)},showPaddingDates:false};a.prototype={init:function(){var n=this;n.container=e("#"+n.options.containerName);if(n.container.length==0){n.container=e("<div>",{id:n.options.containerName});e("body").append(n.container);n.container=e("#"+n.options.containerName)}n.container.hide();e(n.element).click(function(){n.drawCalendars(n)});if(n.options.startDateId==n.options.endDateId)n.options.endDateId+="2";if(n.options.maxDate<n.options.minDate){n.options.maxDate=null;n.options.maxDate=null}n.dateUpdate(n);e(t).bind("resize",{_self:n},n.resize)},closeCalendar:function(e){var t=e.data._self;t.container.hide();t.container.html("")},resize:function(e){var t=e.data._self;t.drawCalendars(t)},drawCalendars:function(t){t.container.show();var n=e("<div>",{"class":"background"});n.bind("click",{_self:t},t.closeCalendar);var r=t.generateCalendar(t,t.options.startDate,t.options.startDateId,t.options.startCalendarTitle);var i=t.generateCalendar(t,t.options.endDate,t.options.endDateId,t.options.endCalendarTitle);var s=e("<div>",{"class":"calendars"}).html(r).append(i);s.offset(t.options.calculatePosition(e(t.element),t));t.container.html(n).append(s)},calculatePosition:function(e){var t=e.offset();return{top:t.top+e.outerHeight(),left:t.left+e.outerWidth()}},generateCalendar:function(t,n,r,i){var s=e("<div>",{id:r,"class":"calendar"});var o=e("<div>",{"class":"calendar-header"});var u=e("<div>",{"class":"calendar-arrow left"});var a=e("<div>",{"class":"calendar-title"});var f=e("<div>",{"class":"calendar-caption"}).html(i);var l=e("<div>",{"class":"calendar-date"}).html(t.options.longMonths[n.getMonth()]+" "+n.getFullYear());var c=e("<div>",{"class":"calendar-arrow right"});var h=e("<div>",{"class":"caldendar-main"});var p=e("<div>",{"class":"calendar-days calendar-table"});var d=e("<div>",{"class":"calendar-dates calendar-table"});u.bind("click",{_self:t,date:n,month:n.getMonth()-1},t.monthClickEvent);c.bind("click",{_self:t,date:n,month:n.getMonth()+1},t.monthClickEvent);o.append(u);a.append(f);a.append(l);o.append(a);o.append(c);s.append(o);for(var v=0;v<7;v++){p.append(e("<div>",{"class":"calendar-cell"}).html(t.options.titleDays[v]))}var m=(new Date(n.getFullYear(),n.getMonth()+1,0)).getDate();var g=(new Date(n.getFullYear(),n.getMonth(),1)).getDay();for(var v=g;v>0;v--){var y;if(t.options.showPaddingDates){var b=new Date(n.getFullYear(),n.getMonth(),1);b.setDate(b.getDate()-v);y=b.getDate()}else{y="&nbsp;"}d.append(e("<div>",{"class":"calendar-cell disabled padding"}).html(y))}for(var v=1;v<=m;v++){var w=new Date(n.valueOf());w.setDate(v);var E="calendar-cell";if(r==t.options.endDateId&&w<=t.options.startDate||w<t.options.minDate&&t.options.minDate instanceof Date||w>t.options.maxDate&&t.options.maxDate instanceof Date)E+=" disabled";else E+=" active";if(v==n.getDate())E+=" selected";var S=e("<div>",{"class":E}).html(v);if(E.indexOf("disabled")==-1)S.bind("click",{_self:t,date:n,day:v},t.dayClickEvent);d.append(S)}for(var v=1;v<=42-(g+m);v++){var y;if(t.options.showPaddingDates){var b=new Date(n.getFullYear(),n.getMonth(),m);b.setDate(b.getDate()+v);y=b.getDate()}else{y="&nbsp;"}d.append(e("<div>",{"class":"calendar-cell disabled padding"}).html(y))}h.append(p);h.append(d);s.append(h);return s},dayClickEvent:function(e){var t=e.data._self;e.data.date.setDate(e.data.day);t.dateUpdate(t);t.drawCalendars(t)},monthClickEvent:function(e){var t=e.data._self;e.data.date.setMonth(e.data.month);t.dateUpdate(t);t.drawCalendars(t)},dateUpdate:function(e){if(e.options.minDate instanceof Date&&+e.options.minDate>+e.options.startDate){e.options.startDate=new Date(e.options.minDate.valueOf())}if(e.options.maxDate instanceof Date&&+e.options.maxDate<+e.options.endDate){e.options.endDate=new Date(e.options.maxDate.valueOf())}if(+e.options.endDate<=+e.options.startDate){e.options.endDate=new Date(e.options.startDate.valueOf());e.options.endDate.setDate(e.options.endDate.getDate()+1)}e.options.onDateChange(e.options.startDate,e.options.endDate,e.options.shortDays,e.options.longDays,e.options.shortMonths,e.options.longMonths)}};e.fn[o]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+o)){var n=new a(this,t);e.data(this,"plugin_"+o,n)}})}})(jQuery,window,document)